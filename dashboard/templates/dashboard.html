<!DOCTYPE html>
<html>
<head>
    <title>Weather Dashboard</title>
</head>
    <body>
        <h1>Weather Dashboard</h1>
    
        <h2>Current Conditions</h2>
        <p>Last update: <br><span id="last-update-span">-</span></p>
        <p>Temperature: <br><span id="temperature-span">-</span></p>
        <p>Humidity: <br><span id="humidity-span">-</span></p>
    </body>
</html>

<link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet">
<style>
    body {
        font-family: 'Inter', sans-serif;
    }

    #temperature-span, #humidity-span, #last-update-span {
        font-size: 2em;
        font-weight: bold;
    }
</style>

<script>
    const temperatureIndicator = document.getElementById("temperature-span");
    const humidityIndicator = document.getElementById("humidity-span");
    const lastUpdateIndicator = document.getElementById("last-update-span");

    const updateEventSource = new EventSource("/update-events-sse");

    updateEventSource.onmessage = function(event) {
        const data = JSON.parse(event.data);

        temperatureIndicator.textContent = `${data.temperature.toFixed(1)}Â°C`;
        humidityIndicator.textContent = `${data.humidity}%`;
        lastUpdateIndicator.textContent = `${data.last_update}`;
    }

    updateEventSource.onerror = function(err) {
        temperatureIndicator.textContent = '-';
        humidityIndicator.textContent = '-';
        lastUpdateIndicator.textContent = '-';

        console.error("SSE error:", err);
    }
</script>